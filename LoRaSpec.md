# Platoデータフォーマット

# LoRaパケットデータ基本構造

| | | | | | | |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|ヘッダ1|データ1|ヘッダ2|データ2|...|ヘッダn|データn|

Platoブリッジ経由でLoRa Gatewayに送信されるPlatoデータは、ヘッダ部＋データ部のセットとなっている。
1件またはn件のセットが送信される。

# ヘッダ部フォーマット

ヘッダ部が4バイト固定長となっている。  
1バイト目のデータタイプによってデータ部のサイズが異なる。

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+00h|uint8_t|1|データタイプ||
|+01h|uint8_t[3]|3|デバイスID||

# データ部フォーマット

データ部の内容はヘッダ部のデータタイプの値によって異なる。  
データはLittle Endian、float値はIEEE754形式で格納される。

## データタイプ 01h : Acceleration

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|X軸加速度値(g)||
|+08h|float|4|Y軸加速度値(g)||
|+0Ch|float|4|Z軸加速度値(g)||

## データタイプ 02h : Gyro

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|X軸値(deg/s)||
|+08h|float|4|Y軸値(deg/s)||
|+0Ch|float|4|Z軸値(deg/s)||

## データタイプ 04h : Temperature

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|温度(度)||

## データタイプ 05h : Humidity

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|湿度(%)||

## データタイプ 06h : Air-pressure

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|気圧(hPa)||

## データタイプ 09h : GPS(GGA)

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|UTC||
|+08h|float|4|緯度(度)||
|+0Ch|float|4|軽度(度)||
|+10h|float|4|HDR||

## データタイプ 0Ah : GPS(VTG)

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|float|4|TTMG||
|+08h|float|4|MTMG||
|+0Ch|float|4|GSK(knot)||
|+10h|float|4|GSK(km/h)||

## データタイプ 15h : Vibration

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|uint16_t|2|b15:振動有無<br/>b14-b0:振動回数||

## データタイプ 32h : Battery

|オフセット|型|サイズ|項目|備考|
|:-:|:-:|:-:|:--|:--|
|+04h|uint8_t|1|LOW||
|+05h|uint8_t|1|バッテリレベル(%)||

